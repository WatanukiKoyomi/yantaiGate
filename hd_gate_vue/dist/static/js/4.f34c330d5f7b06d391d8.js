webpackJsonp([4,15,16],{"4Ksf":function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=l("wVsK"),o=l("j79u"),n=l("uTVu"),s={components:{roleTable:o.default,userTable:r.default},data:function(){return{roleId:null,activeName:"menu"}},methods:{},mounted:function(){n.a.$on("roleRowClick",function(e){this.roleId=e.role})}},a={render:function(){var e=this.$createElement,t=this._self._c||e;return t("el-container",[t("el-aside",{attrs:{width:"40%"}},[t("userTable",{ref:"userTable"})],1),this._v(" "),t("el-main",[t("roleTable",{ref:"roleTable"})],1)],1)},staticRenderFns:[]},i=l("VU/8")(s,a,!1,null,null,null);t.default=i.exports},j79u:function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=l("uTVu"),o=[],n={components:{},data:function(){return{listLoading:!1,tableData:o,userId:""}},mounted:function(){var e=this;r.a.$on("userRole_userRowClicked",function(t){e.queryAllRoles(t.userId),e.userId=t.userId})},methods:{queryAllRoles:function(e){o.filter(function(e){return!0}).forEach(function(e){o.pop(e)});var t=[],l=this;this.$axios.get("/hdGate/roleController/queryRolesByUser",{params:{userId:e}}).then(function(e){(t=e).forEach(function(e){e.roleIsChecked=!1}),l.$axios.get("/hdGate/roleController/queryAllRoles").then(function(e){e.forEach(function(e){var l=!1;t.forEach(function(t){e.roleId===t.roleId&&(e.roleIsChecked=!0,l=!0)}),l||(e.roleIsChecked=!1),o.push(e)})},function(e){console.log("queryAllRoles error")})},function(e){console.log("queryRolesByUser error")})},switchChange:function(e){var t=this;this.$axios.get("/hdGate/roleController/addOrDeleteUserRole",{params:{userId:this.userId,roleId:e.roleId,flag:e.roleIsChecked}}).then(function(e){t.$message({message:"用户角色授权更改成功",type:"success"})},function(e){console.log("error")})}}},s={render:function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("el-container",[l("el-main",[l("div",{style:{width:"100%"}},[l("el-table",{directives:[{name:"loading",rawName:"v-loading.body",value:e.listLoading,expression:"listLoading",modifiers:{body:!0}}],staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:"",border:""}},[l("el-table-column",{attrs:{align:"center",prop:"roleName",label:"角色名"}}),e._v(" "),l("el-table-column",{attrs:{align:"center",prop:"description",label:"描述"}}),e._v(" "),l("el-table-column",{attrs:{align:"center",prop:"isAdmin",label:"是否管理员"}}),e._v(" "),l("el-table-column",{attrs:{align:"center",label:"授权",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.hasBtnPerm("resource_update")?l("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:function(l){e.switchChange(t.row)}},model:{value:t.row.roleIsChecked,callback:function(l){e.$set(t.row,"roleIsChecked",l)},expression:"scope.row.roleIsChecked"}}):e._e()]}}])})],1)],1)])],1)},staticRenderFns:[]},a=l("VU/8")(n,s,!1,null,null,null);t.default=a.exports},wVsK:function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=l("uTVu"),o=[],n={components:{},data:function(){return{listLoading:!1,tableData:o}},mounted:function(){this.queryAllUsers()},methods:{roleRowClick:function(e,t,l){r.a.$emit("userRole_userRowClicked",e)},queryAllUsers:function(){this.$axios.get("/hdGate/userController/queryAllUsers").then(function(e){e.forEach(function(e){e.edit=!1,o.push(e)})},function(e){console.log("error")})}}},s={render:function(){var e=this.$createElement,t=this._self._c||e;return t("el-container",[t("el-main",[t("div",{style:{width:"100%"}},[t("el-table",{directives:[{name:"loading",rawName:"v-loading.body",value:this.listLoading,expression:"listLoading",modifiers:{body:!0}}],staticStyle:{width:"100%"},attrs:{data:this.tableData,stripe:"",border:"","highlight-current-row":""},on:{"row-click":this.roleRowClick}},[t("el-table-column",{attrs:{align:"center",prop:"userName",label:"用户名"}}),this._v(" "),t("el-table-column",{attrs:{align:"center",prop:"userDescription",label:"描述"}}),this._v(" "),t("el-table-column",{attrs:{align:"center",prop:"account",label:"登录账号"}})],1)],1)])],1)},staticRenderFns:[]},a=l("VU/8")(n,s,!1,null,null,null);t.default=a.exports}});