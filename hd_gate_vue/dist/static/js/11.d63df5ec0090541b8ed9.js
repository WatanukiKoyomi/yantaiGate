webpackJsonp([11],{YSz8:function(t,e){},cN3b:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("0xDb"),r={components:{},data:function(){return{truckCounts:"",truckPercent:"",cntrCounts:"",averageTime:"",cntrPercent:"",screenHeight:document.documentElement.clientHeight,clickedData:"",showImgs:[],laneCode:"",truckNo:"",cntrNo:"",pageNo:1,pageSize:20,pageSizesList:[20,50,100,500],tableData:[],totalDataNumber:100,dialogVisible:!1,beginAndEndTime:[Object(a.b)(new Date(new Date((new Date).toLocaleDateString()).getTime())),Object(a.b)(new Date)]}},mounted:function(){var t=this;this.searchBusinessDataHistory(),window.onresize=function(){t.screenHeight=document.documentElement.clientHeight}},watch:{beginAndEndTime:function(t,e){null===t?this.beginAndEndTime=[Object(a.b)(new Date(new Date((new Date).toLocaleDateString()).getTime())),Object(a.b)(new Date)]:(this.pageNo=1,this.searchBusinessDataHistory())},laneCode:function(t,e){this.pageNo=1,this.searchBusinessDataHistory()},truckNo:function(t,e){this.pageNo=1,this.searchBusinessDataHistory()},cntrNo:function(t,e){this.pageNo=1,this.searchBusinessDataHistory()}},methods:{handleSizeChange:function(t){var e=""+t;this.pageNo=1,this.pageSize=parseInt(e),this.searchBusinessDataHistory()},handleCurrentChange:function(t){this.searchBusinessDataHistory()},searchBusinessDataHistory:function(){var t=this;this.$axios.get("/hdGate/history/queryHistoryDataByParam",{params:{laneCode:this.laneCode,truckNo:this.truckNo,cntrNo:this.cntrNo,beginTime:Object(a.b)(this.beginAndEndTime[0]),endTime:Object(a.b)(this.beginAndEndTime[1]),pageNum:this.pageNo,pageSize:this.pageSize}}).then(function(e){console.log("queryHistoryDataByParam",e),t.tableData=e.list,t.totalDataNumber=e.total,t.truckCounts=e.list.length;var n=0,a=0,r=0,o=0;e.list.forEach(function(t){a+=parseInt(t.generalInfo.cntrSize),null!==t.enterTime&&""!==t.enterTime&&void 0!==t.enterTime&&(o=new Date(t.enterTime)-new Date(t.arriveTime)),null!==t.carPlate.ocrPlate&&""!==t.carPlate.ocrPlate&&t.carPlate.ocrPlate!==t.ocrCarPlate.ocrPlate&&n++,null!==t.frontContainer.ocrContainerNo&&""!==t.frontContainer.ocrContainerNo&&t.frontContainer.ocrContainerNo!==t.ocrFrontContainer.ocrContainerNo&&r++,null!==t.afterContainer.ocrContainerNo&&""!==t.afterContainer.ocrContainerNo&&t.afterContainer.ocrContainerNo!==t.ocrAfterContainer.ocrContainerNo&&r++}),t.cntrCounts=a,0===t.truckCounts?t.truckPercent=0:t.truckPercent=100*(t.truckCounts-n)/t.truckCounts,t.cntrPercent=0===a?0:100*(a-r)/a,t.averageTime=o/1e3},function(t){console.log("queryHistoryDataByParam error")})},showHistoryDialog:function(t){var e=this;this.dialogVisible=!0,this.showImgs=[],console.log("showHistoryDialog data:",t),this.clickedData=t;var n=t.ftpImages.imagePath;n.indexOf("ftp://")>=0&&(n=n.substring(6));var a=n.indexOf("/");n=n.substring(a+1),console.log("图片地址：",n),t.ftpImages.imageName.split(",").forEach(function(t){e.showImgs.push(n+"/"+t)}),console.log("显示历史纪录该条记录详情",t)}}},o={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-container",[n("el-main",[n("el-row",[n("el-card",{staticClass:"box-card"},[n("div",{},[n("el-row",[n("el-col",{staticClass:"col-class",attrs:{span:6}},[n("el-input",{attrs:{placeholder:"请输入车道编号",clearable:""},model:{value:t.laneCode,callback:function(e){t.laneCode=e},expression:"laneCode"}})],1),t._v(" "),n("el-col",{staticClass:"col-class",attrs:{span:6}},[n("el-input",{attrs:{placeholder:"请输入车牌号",clearable:""},model:{value:t.truckNo,callback:function(e){t.truckNo=e},expression:"truckNo"}})],1),t._v(" "),n("el-col",{staticClass:"col-class",attrs:{span:6}},[n("el-input",{attrs:{placeholder:"请输入箱号",clearable:""},model:{value:t.cntrNo,callback:function(e){t.cntrNo=e},expression:"cntrNo"}})],1),t._v(" "),n("el-col",{staticClass:"col-class",attrs:{span:6}},[n("el-date-picker",{attrs:{type:"datetimerange",align:"left","start-placeholder":"开始日期","end-placeholder":"结束日期","default-time":["00:00:00","23:59:59"]},model:{value:t.beginAndEndTime,callback:function(e){t.beginAndEndTime=e},expression:"beginAndEndTime"}})],1)],1)],1)])],1),t._v(" "),n("el-row",{staticClass:"panel-group",attrs:{gutter:40}},[n("el-col",{staticStyle:{"margin-top":"10px"},attrs:{lg:24}},[n("el-card",{staticClass:"box-card"},[n("div",[n("el-row",[n("el-col",{attrs:{lg:4}},[t._v("\n                  车次:"),n("el-input",{staticStyle:{width:"120px"},model:{value:t.truckCounts,callback:function(e){t.truckCounts=e},expression:"truckCounts"}})],1),t._v(" "),n("el-col",{attrs:{lg:5}},[t._v("\n                  车牌识别率:"),n("el-input",{staticStyle:{width:"120px"},model:{value:Math.round(100*t.truckPercent)/100,callback:function(e){t.$set(Math,"round(truckPercent*100)/100",e)},expression:"Math.round(truckPercent*100)/100"}}),t._v("%")],1),t._v(" "),n("el-col",{attrs:{lg:4}},[t._v("\n                  箱数:"),n("el-input",{staticStyle:{width:"120px"},model:{value:t.cntrCounts,callback:function(e){t.cntrCounts=e},expression:"cntrCounts"}})],1),t._v(" "),n("el-col",{attrs:{lg:6}},[t._v("\n                  箱号识别率:"),n("el-input",{staticStyle:{width:"120px"},model:{value:Math.round(100*t.cntrPercent)/100,callback:function(e){t.$set(Math,"round(cntrPercent*100)/100",e)},expression:"Math.round(cntrPercent*100)/100"}}),t._v("%")],1),t._v(" "),n("el-col",{attrs:{lg:5}},[t._v("\n                平均过车时间:"),n("el-input",{staticStyle:{width:"120px"},model:{value:t.averageTime,callback:function(e){t.averageTime=e},expression:"averageTime"}}),t._v("秒")],1)],1)],1)])],1)],1),t._v(" "),n("el-row",{staticStyle:{"margin-top":"10px"}},[n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,stripe:""}},[n("el-table-column",{attrs:{align:"center",label:"车道编号",width:"80px"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n            "+t._s(e.row.generalInfo.laneCode)+"\n          ")]}}])}),t._v(" "),n("el-table-column",{attrs:{align:"center",label:"车牌号",width:"125px"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.ocrCarPlate?n("span",[e.row.carPlate?n("span",[e.row.carPlate.ocrPlate&&e.row.carPlate.ocrPlate!=e.row.ocrCarPlate.ocrPlate?n("el-tooltip",{attrs:{effect:"dark",content:"原内容："+e.row.ocrCarPlate.ocrPlate,placement:"top-start"}},[n("el-button",{staticStyle:{border:"1px solid red"}},[t._v(t._s(e.row.carPlate.ocrPlate))])],1):n("span",[t._v(t._s(e.row.carPlate.ocrPlate)+t._s(e.row.ocrCarPlate.ocrPlate))])],1):n("span",[t._v(t._s(e.row.ocrCarPlate.ocrPlate))])]):t._e()]}}])}),t._v(" "),n("el-table-column",{attrs:{align:"center",label:"前箱号",width:"180px"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.ocrFrontContainer?n("span",[e.row.frontContainer?n("span",[e.row.frontContainer.ocrContainerNo&&e.row.frontContainer.ocrContainerNo!=e.row.ocrFrontContainer.ocrContainerNo?n("el-tooltip",{attrs:{effect:"dark",content:"原内容："+e.row.ocrFrontContainer.ocrContainerNo,placement:"top-start"}},[n("el-button",{staticStyle:{border:"1px solid red"}},[t._v(t._s(e.row.frontContainer.ocrContainerNo))])],1):n("span",[t._v(t._s(e.row.ocrFrontContainer.ocrContainerNo))])],1):n("span",[t._v(t._s(e.row.ocrFrontContainer.ocrContainerNo))])]):t._e()]}}])}),t._v(" "),n("el-table-column",{attrs:{align:"center",label:"前箱型",width:"80px"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.ocrFrontContainer?n("span",[t._v(t._s(e.row.ocrFrontContainer.ocrContainerISO))]):t._e()]}}])}),t._v(" "),n("el-table-column",{attrs:{align:"center",label:"前箱空重",width:"80px"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.ocrFrontContainer?n("span",[t._v(t._s(e.row.ocrFrontContainer.efid))]):t._e()]}}])}),t._v(" "),n("el-table-column",{attrs:{align:"center",label:"后箱号",width:"180px"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.ocrAfterContainer?n("span",[e.row.afterContainer?n("span",[e.row.afterContainer.ocrContainerNo&&e.row.afterContainer.ocrContainerNo!=e.row.ocrAfterContainer.ocrContainerNo?n("el-tooltip",{attrs:{effect:"dark",content:"原内容："+e.row.ocrAfterContainer.ocrContainerNo,placement:"top-start"}},[n("el-button",{staticStyle:{border:"1px solid red"}},[t._v(t._s(e.row.afterContainer.ocrContainerNo))])],1):n("span",[t._v(t._s(e.row.ocrAfterContainer.ocrContainerNo))])],1):n("span",[t._v(t._s(e.row.ocrAfterContainer.ocrContainerNo))])]):t._e()]}}])}),t._v(" "),n("el-table-column",{attrs:{align:"center",label:"后箱型",width:"80px"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.ocrAfterContainer?n("span",[t._v(t._s(e.row.ocrAfterContainer.ocrContainerISO))]):t._e()]}}])}),t._v(" "),n("el-table-column",{attrs:{align:"center",label:"后箱空重",width:"80px"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.ocrAfterContainer?n("span",[t._v(t._s(e.row.ocrAfterContainer.efid))]):t._e()]}}])}),t._v(" "),n("el-table-column",{attrs:{align:"center",prop:"arriveTime",label:"开始时间",width:"100px"}}),t._v(" "),n("el-table-column",{attrs:{align:"center",prop:"enterTime",label:"结束时间",width:"100px"}}),t._v(" "),n("el-table-column",{attrs:{align:"center",prop:"msg",label:"反馈消息"}}),t._v(" "),n("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{type:"primary",size:"small",icon:"fa fa-search"},on:{click:function(n){t.showHistoryDialog(e.row)}}},[t._v("图片")])]}}])})],1),t._v(" "),n("el-pagination",{staticClass:"pull-left clearfix",attrs:{"current-page":t.pageNo,"page-sizes":t.pageSizesList,"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.totalDataNumber},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.pageNo=e}}})],1),t._v(" "),n("el-dialog",{attrs:{title:"历史记录",visible:t.dialogVisible,width:"85%",top:"5vh"},on:{"update:visible":function(e){t.dialogVisible=e}}},[n("el-carousel",{attrs:{"indicator-position":"outside",autoplay:!1,loop:!1,height:2*t.screenHeight/3+30+"px"}},t._l(t.showImgs,function(e,a){return n("el-carousel-item",{key:a},[n("viewer",{staticStyle:{height:"100%"},attrs:{images:t.showImgs}},[n("div",{staticClass:"img-box",staticStyle:{"text-align":"center",height:"100%"}},[n("img",{staticStyle:{height:"100%",width:"80%"},attrs:{src:e}})])])],1)}))],1)],1)],1)},staticRenderFns:[]};var i=n("VU/8")(r,o,!1,function(t){n("YSz8")},"data-v-b19ce1e4",null);e.default=i.exports}});