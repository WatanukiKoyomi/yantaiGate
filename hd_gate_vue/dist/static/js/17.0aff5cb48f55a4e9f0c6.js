webpackJsonp([17],{H1bY:function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=l("+PFJ"),n=l("uTVu"),i=[],r={components:{roleForm:o.default},data:function(){return{listLoading:!1,tableData:i,clickedRoleId:"",clickedRoleName:""}},mounted:function(){i.filter(function(e){return!0}).forEach(function(e){i.pop(e)}),this.queryAllRoles()},methods:{roleRowClick:function(e,t,l){this.clickedRoleName=e.roleName,this.clickedRoleId=e.roleId,n.a.$emit("roleTablesClickedRow",e)},addRole:function(){this.$refs.roleForm.show("add",{})},updateRole:function(e,t){"1"!==t.isAdmin&&(t.isAdmin="0"),this.$refs.roleForm.show("update",t)},deleteRole:function(){var e=this;void 0!==this.clickedRoleId?this.$confirm("此操作将永久删除“"+this.clickedRoleName+"”角色, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$axios.get("/hdGate/roleController/deleteRole",{params:{roleId:e.clickedRoleId}}).then(function(e){},function(e){console.log("删除角色失败")}),location.reload()}).catch(function(){e.$message({type:"info",message:"已取消删除"})}):this.$message({type:"error",message:"请选择角色！"})},queryAllRoles:function(){this.$axios.get("/hdGate/roleController/queryAllRoles").then(function(e){e.forEach(function(e){e.edit=!1,i.push(e)})},function(e){console.log("error")})}}},a={render:function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("el-container",[l("el-main",[l("div",{staticClass:"filter-container"},[e.hasBtnPerm("role_add")?l("el-button",{staticClass:"filter-item",attrs:{type:"primary"},on:{click:e.addRole}},[e._v("新增")]):e._e(),e._v(" "),e.hasBtnPerm("role_delete")?l("el-button",{staticClass:"filter-item",attrs:{type:"danger"},on:{click:e.deleteRole}},[e._v("删除")]):e._e()],1),e._v(" "),l("div",{style:{width:"100%"}},[l("el-table",{directives:[{name:"loading",rawName:"v-loading.body",value:e.listLoading,expression:"listLoading",modifiers:{body:!0}}],staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:"",border:"","highlight-current-row":""},on:{"row-click":e.roleRowClick}},[l("el-table-column",{attrs:{align:"center",prop:"roleName",label:"名称"}}),e._v(" "),l("el-table-column",{attrs:{align:"center",prop:"description",label:"描述"}}),e._v(" "),l("el-table-column",{attrs:{align:"center",prop:"isAdmin",label:"是否管理员"},scopedSlots:e._u([{key:"default",fn:function(t){return["1"===t.row.isAdmin?l("span",[e._v("是")]):l("span",[e._v("否")])]}}])}),e._v(" "),l("el-table-column",{attrs:{align:"center",label:"操作",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.hasBtnPerm("role_update")?l("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-edit"},on:{click:function(l){e.updateRole(t.$index,t.row)}}},[e._v("修改")]):e._e()]}}])})],1)],1)]),e._v(" "),l("role-form",{ref:"roleForm"})],1)},staticRenderFns:[]},s=l("VU/8")(r,a,!1,null,null,null);t.default=s.exports}});