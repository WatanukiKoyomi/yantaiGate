webpackJsonp([16],{j79u:function(e,o,r){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var t=r("uTVu"),l=[],n={components:{},data:function(){return{listLoading:!1,tableData:l,userId:""}},mounted:function(){var e=this;t.a.$on("userRole_userRowClicked",function(o){e.queryAllRoles(o.userId),e.userId=o.userId})},methods:{queryAllRoles:function(e){l.filter(function(e){return!0}).forEach(function(e){l.pop(e)});var o=[],r=this;this.$axios.get("/hdGate/roleController/queryRolesByUser",{params:{userId:e}}).then(function(e){(o=e).forEach(function(e){e.roleIsChecked=!1}),r.$axios.get("/hdGate/roleController/queryAllRoles").then(function(e){e.forEach(function(e){var r=!1;o.forEach(function(o){e.roleId===o.roleId&&(e.roleIsChecked=!0,r=!0)}),r||(e.roleIsChecked=!1),l.push(e)})},function(e){console.log("queryAllRoles error")})},function(e){console.log("queryRolesByUser error")})},switchChange:function(e){var o=this;this.$axios.get("/hdGate/roleController/addOrDeleteUserRole",{params:{userId:this.userId,roleId:e.roleId,flag:e.roleIsChecked}}).then(function(e){o.$message({message:"用户角色授权更改成功",type:"success"})},function(e){console.log("error")})}}},s={render:function(){var e=this,o=e.$createElement,r=e._self._c||o;return r("el-container",[r("el-main",[r("div",{style:{width:"100%"}},[r("el-table",{directives:[{name:"loading",rawName:"v-loading.body",value:e.listLoading,expression:"listLoading",modifiers:{body:!0}}],staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:"",border:""}},[r("el-table-column",{attrs:{align:"center",prop:"roleName",label:"角色名"}}),e._v(" "),r("el-table-column",{attrs:{align:"center",prop:"description",label:"描述"}}),e._v(" "),r("el-table-column",{attrs:{align:"center",prop:"isAdmin",label:"是否管理员"}}),e._v(" "),r("el-table-column",{attrs:{align:"center",label:"授权",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(o){return[e.hasBtnPerm("resource_update")?r("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:function(r){e.switchChange(o.row)}},model:{value:o.row.roleIsChecked,callback:function(r){e.$set(o.row,"roleIsChecked",r)},expression:"scope.row.roleIsChecked"}}):e._e()]}}])})],1)],1)])],1)},staticRenderFns:[]},a=r("VU/8")(n,s,!1,null,null,null);o.default=a.exports}});