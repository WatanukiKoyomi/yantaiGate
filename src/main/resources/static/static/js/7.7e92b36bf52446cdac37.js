webpackJsonp([7,22],{"5pVa":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a("mvHQ"),n=a.n(l),o=a("uTVu"),i={name:"laneForm",components:{},props:{laneData:{}},data:function(){return{laneForm:{},visible:!1,loading:!1,flag:"init",parentDept:{}}},methods:{show:function(e,t){this.visible=!0,console.log("新增或修改标志:"+e),"add"===e?(this.flag="add",this.laneForm.showFlag="Y"):(this.flag="update",this.laneForm=JSON.parse(n()(t)),this.laneForm.oldLaneCode=this.laneForm.laneCode,this.laneForm.oldLaneDirection=this.laneForm.laneDirection,this.laneForm.oldLaneIp=this.laneForm.laneIp,this.laneForm.oldLanePort=this.laneForm.lanePort)},submit:function(){var e=this;this.$axios.get("/hdGate/laneManagement/insertOrUpdateLane",{params:{laneForm:this.laneForm}}).then(function(t){console.log("insertOrUpdateLane ",t),e.visible=!1,o.a.$emit("initAllGateLanes",t)},function(e){console.log("insertOrUpdateLane error")})},cancle:function(){this.visible=!1,this.laneForm={},this.flag="init"},switchShowFlagChange:function(e){console.log("switchShowFlagChange",e),this.laneForm.showFlag="Y","Y"===e&&(this.laneForm.showFlag="N")}}},s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"编辑",visible:e.visible,width:"60%"},on:{"update:visible":function(t){e.visible=t}}},[a("el-form",{attrs:{"label-width":"100px",model:e.laneForm}},[a("el-row",[a("el-col",{attrs:{span:8,xs:16}},[a("el-form-item",{attrs:{label:"车道编号",prop:"laneCode",rules:[{required:!0,message:"此处必填",trigger:"blur"},{max:200,message:"输入非法",trigger:"blur"}]}},[a("el-input",{attrs:{type:"text",readonly:"update"==e.flag},model:{value:e.laneForm.laneCode,callback:function(t){e.$set(e.laneForm,"laneCode",t)},expression:"laneForm.laneCode"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8,xs:8}},[a("el-form-item",{attrs:{label:"车道名称",prop:"laneName",rules:[{required:!0,message:"此处必填",trigger:"blur"},{max:200,message:"输入非法",trigger:"blur"}]}},[a("el-input",{attrs:{type:"text"},model:{value:e.laneForm.laneName,callback:function(t){e.$set(e.laneForm,"laneName",t)},expression:"laneForm.laneName"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8,xs:8}},[a("el-form-item",{attrs:{label:"进出方向",prop:"laneDirection",rules:[{max:255,message:"输入非法",trigger:"blur"}]}},[a("el-input",{attrs:{type:"text"},model:{value:e.laneForm.laneDirection,callback:function(t){e.$set(e.laneForm,"laneDirection",t)},expression:"laneForm.laneDirection"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8,xs:16}},[a("el-form-item",{attrs:{label:"socket的ip",prop:"apiServiceUrl",rules:[{max:255,message:"输入非法",trigger:"blur"}]}},[a("el-input",{attrs:{type:"text"},model:{value:e.laneForm.laneIp,callback:function(t){e.$set(e.laneForm,"laneIp",t)},expression:"laneForm.laneIp"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8,xs:16}},[a("el-form-item",{attrs:{label:"socket的端口",prop:"apiServiceUrl",rules:[{max:255,message:"输入非法",trigger:"blur"}]}},[a("el-input",{attrs:{type:"text"},model:{value:e.laneForm.lanePort,callback:function(t){e.$set(e.laneForm,"lanePort",t)},expression:"laneForm.lanePort"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8,xs:16}},[a("el-form-item",{attrs:{label:"是否启用",prop:"showFlag",rules:[{max:255,message:"输入非法",trigger:"blur"}]}},[a("el-switch",{attrs:{"active-text":"启用","inactive-text":"禁用"},on:{change:function(t){e.switchShowFlagChange(e.laneForm.showFlag)}},model:{value:"Y"===e.laneForm.showFlag,callback:function(t){e.$set(e.laneForm,"showFlag === 'Y'",t)},expression:"laneForm.showFlag === 'Y'"}})],1)],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.cancle}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",loading:e.loading},on:{click:e.submit}},[e._v("确定")])],1)],1)},staticRenderFns:[]},r=a("VU/8")(i,s,!1,null,null,null);t.default=r.exports},VFJH:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a("uTVu"),n=a("0xDb"),o={components:{laneForm:a("5pVa").default},data:function(){return{lightOnTime:"",lightOffTime:"",clickedLane:"",dialogVisible:!1,tableData:[{laneCode:"01",laneDirection:"进闸",showFlag:""}]}},mounted:function(){var e=this;this.initGateLanes(),l.a.$on("initAllGateLanes",function(t){e.initGateLanes()})},methods:{initGateLanes:function(){var e=this;this.$axios.get("/hdGate/laneManagement/queryAllGateLanes").then(function(t){console.log("queryAllGateLanes",t),e.tableData=t},function(e){console.log("error")})},switchShowFlagChange:function(e){var t=this;console.log("switchShowFlagChange",e);var a="Y",l="启用";"Y"===e.showFlag&&(a="N",l="禁用"),this.$confirm("确认"+l+"“"+e.laneCode+"”车道？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$axios.get("/hdGate/laneManagement/changeGateLaneShowFlag",{params:{laneCode:e.laneCode,showFlag:a}}).then(function(n){console.log(l+"“"+e.laneCode+"“成功",n,!0===n),n?(e.showFlag=a,t.$message({type:"success",message:l+"“"+e.laneCode+"“成功!"})):(console.log(l+"“"+e.laneCode+"“失败!"),t.$message({type:"warning",message:l+"“"+e.laneCode+"“失败!"}))},function(a){console.log(l+"“"+e.laneCode+"“失败"),t.$message({type:"warning",message:l+"“"+e.laneCode+"“失败"})})}).catch(function(){t.$message({type:"info",message:"已取消操作"})})},showLightSetDialog:function(e){this.clickedLane=e,this.dialogVisible=!0},lightSet:function(){this.light(this.clickedLane,"set")},light:function(e,t){var a=this;this.dialogVisible=!1,this.$axios.get("/hdGate/monitor/light",{params:{lane:e,flag:t,lightOnTime:Object(n.b)(this.lightOnTime),lightOffTime:Object(n.b)(this.lightOffTime)}}).then(function(e){a.$message({message:"补光灯操作成功"}),a.lightOnTime="",a.lightOffTime=""},function(e){console.log("rod error")})},addLane:function(){this.$refs.laneForm.show("add",null)},updateLane:function(e){this.$refs.laneForm.show("update",e),console.log("updateLane",e)},deleteLane:function(e){var t=this;console.log("deleteLane",e),this.$confirm("此操作将永久删除“"+e.laneCode+"“车道信息, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$axios.get("/hdGate/laneManagement/deleteLane",{params:{laneForm:e}}).then(function(e){console.log("delete lane ",!0),t.initGateLanes()},function(e){console.log("删除车道信息失败")})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})}}},i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-main",[a("div",{staticClass:"filter-container"},[a("el-button",{staticClass:"filter-item",attrs:{type:"primary"},on:{click:e.addLane}},[e._v("新增")])],1),e._v(" "),a("div",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:""}},[a("el-table-column",{attrs:{align:"center",prop:"laneCode",label:"车道编号"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"laneName",label:"车道名称"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"laneDirection",label:"进出方向"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"showFlag",label:"禁用状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{attrs:{"active-text":"启用","inactive-text":"禁用"},on:{change:function(a){e.switchShowFlagChange(t.row)}},model:{value:"Y"===t.row.showFlag,callback:function(a){e.$set(t.row,"showFlag === 'Y'",a)},expression:"scope.row.showFlag === 'Y'"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"success",size:"small",icon:"el-icon-edit"},on:{click:function(a){e.updateLane(t.row)}}},[e._v("修改")]),e._v(" "),a("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-delete"},on:{click:function(a){e.deleteLane(t.row)}}},[e._v("删除")]),e._v(" "),a("el-button",{staticStyle:{display:"none"},attrs:{type:"primary",size:"small",icon:"el-icon-alarm-clock"},on:{click:function(a){e.showLightSetDialog(t.row)}}},[e._v("补光灯设置")])]}}])})],1),e._v(" "),a("el-dialog",{attrs:{title:"提示",visible:e.dialogVisible,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("span",[e._v("请选择对车道“"+e._s(e.clickedLane.laneCode)+"”补光灯进行设置")]),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[e._v("\n            开灯时间\n            "),a("el-date-picker",{attrs:{type:"datetime",placeholder:"请选择开灯时间"},model:{value:e.lightOnTime,callback:function(t){e.lightOnTime=t},expression:"lightOnTime"}})],1),e._v(" "),a("el-col",{attrs:{span:12}},[e._v("\n            关灯时间\n            "),a("el-date-picker",{attrs:{type:"datetime",placeholder:"请选择关灯时间"},model:{value:e.lightOffTime,callback:function(t){e.lightOffTime=t},expression:"lightOffTime"}})],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.lightSet()}}},[e._v("确 定")]),e._v(" "),a("el-button",{attrs:{type:"warning"},on:{click:function(t){e.lightOn(e.clickedLane)}}},[e._v("开 灯")]),e._v(" "),a("el-button",{attrs:{type:"danger"},on:{click:function(t){e.lightOff(e.clickedLane)}}},[e._v("关 灯")])],1)],1),e._v(" "),a("lane-form",{ref:"laneForm"})],1)])],1)},staticRenderFns:[]},s=a("VU/8")(o,i,!1,null,null,null);t.default=s.exports}});