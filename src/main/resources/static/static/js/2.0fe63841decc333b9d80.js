webpackJsonp([2,8,21],{"/zlc":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("GC9I"),l=n("GjWk"),s={components:{deptTree:a.default,deptTable:l.default},data:function(){return{}},methods:{change:function(e){}}},r={render:function(){var e=this.$createElement,t=this._self._c||e;return t("el-container",{staticStyle:{height:"100%"}},[t("el-aside",{staticStyle:{height:"100%"}},[t("dept-tree",{ref:"deptTree"})],1),this._v(" "),t("el-main",[t("deptTable",{ref:"deptTable",on:{change:this.change}})],1)],1)},staticRenderFns:[]},o=n("VU/8")(s,r,!1,null,null,null);t.default=o.exports},"7Lxs":function(e,t){},GC9I:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("uTVu"),l={data:function(){return{deptDatas:[{deptId:"",label:"",children:[]}]}},methods:{searchDept:function(){var e=this,t=JSON.parse(sessionStorage.user).username;this.$axios.get("/hdGate/deptController/queryDeptsByAccount",{params:{username:t}}).then(function(t){e.deptDatas=t},function(e){console.log("error")})},sendMsg:function(e,t){a.a.$emit("clickedDeptId",e)}},mounted:function(){this.searchDept()}},s={render:function(){var e=this.$createElement;return(this._self._c||e)("el-tree",{staticStyle:{height:"100%"},attrs:{data:this.deptDatas,"node-key":"deptId","default-expand-all":"","highlight-current":!0,"expand-on-click-node":!1},on:{"node-click":this.sendMsg}})},staticRenderFns:[]};var r=n("VU/8")(l,s,!1,function(e){n("7Lxs")},null,null);t.default=r.exports},GjWk:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("mvHQ"),l=n.n(a),s=n("uTVu"),r=[{deptId:"",label:"",children:[]}],o={components:{deptForm:n("vymf").default},data:function(){return{listLoading:!1,tableData:r,flag:!1,parentDept:{}}},mounted:function(){var e=this;s.a.$on("clickedDeptId",function(t){r.filter(function(e){return!0}).forEach(function(e){r.pop(e)}),null!==t.children&&t.children.forEach(function(e){e.edit=!1,r.push(e)}),e.listLoading=!1,e.flag=!0,e.parentDept=t})},methods:{addDept:function(){this.flag?this.$refs.deptForm.show("add",this.parentDept):this.$message({type:"error",message:"请选择部门！"})},updateDept:function(e,t){console.log("updateDept",e),console.log("updateDept",t),this.$refs.deptForm.show("update",t)},updateDeptName:function(e,t){this.flag?(console.log("index:",e),console.log(this.parentDept),this.$refs.deptForm.show("update",this.parentDept)):this.$message({type:"error",message:"请选择部门！"})},deleteDept:function(e,t){var n=this;this.flag?"1"===this.parentDept.deptId?this.$message({type:"warning",message:"该部门为根部门，不能删除，如有需要请选择修改"}):this.$confirm("此操作将永久删除“"+this.parentDept.label+"”部门及其部门下的所有子部门,及其部门下的所有用户, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e=l()(n.parentDept);console.log("aaa:",n.parentDept,e),n.parentDept.children=null,n.$axios.get("/hdGate/deptController/deleteDept",{params:{parentDept:n.parentDept}}).then(function(e){console.log("delete dept success")},function(e){console.log("删除部门失败")}),location.reload()}).catch(function(){n.$message({type:"info",message:"已取消删除"})}):this.$message({type:"error",message:"请选择部门！"})}}},i={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-container",[n("el-main",[n("div",{staticClass:"filter-container"},[n("el-row",[n("el-col",{attrs:{span:4}},[n("h2",{staticStyle:{"margin-top":"0px"}},[e._v("部门管理:")])]),e._v(" "),n("el-col",{attrs:{span:20}},[e.hasBtnPerm("dept_add")?n("el-button",{staticClass:"filter-item",attrs:{type:"primary"},on:{click:e.addDept}},[e._v("新增")]):e._e(),e._v(" "),e.hasBtnPerm("dept_delete")?n("el-button",{staticClass:"filter-item",attrs:{type:"danger"},on:{click:e.deleteDept}},[e._v("删除")]):e._e(),e._v(" "),e.hasBtnPerm("dept_update")?n("el-button",{staticClass:"filter-item",attrs:{type:"warning"},on:{click:e.updateDeptName}},[e._v("修改")]):e._e()],1)],1)],1),e._v(" "),n("div",{style:{width:"100%"}},[n("el-table",{directives:[{name:"loading",rawName:"v-loading.body",value:e.listLoading,expression:"listLoading",modifiers:{body:!0}}],staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:"",border:""}},[n("el-table-column",{attrs:{align:"center",prop:"label",label:"名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[n("el-input",{staticClass:"edit-input",attrs:{size:"small"},model:{value:t.row.label,callback:function(n){e.$set(t.row,"label",n)},expression:"scope.row.label"}})]:n("span",[e._v(e._s(t.row.label))])]}}])}),e._v(" "),n("el-table-column",{attrs:{align:"center",prop:"deptEnName",label:"英文名称"}}),e._v(" "),n("el-table-column",{attrs:{align:"center",prop:"deptShortName",label:"名称简写"}}),e._v(" "),n("el-table-column",{attrs:{align:"center",prop:"sortNo",label:"排列序号"}}),e._v(" "),n("el-table-column",{attrs:{align:"center",label:"操作",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.hasBtnPerm("dept_update")?n("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-edit"},on:{click:function(n){e.updateDept(t.$index,t.row)}}},[e._v("修改")]):e._e()]}}])})],1)],1)]),e._v(" "),n("dept-form",{ref:"deptForm"})],1)},staticRenderFns:[]},c=n("VU/8")(o,i,!1,null,null,null);t.default=c.exports}});